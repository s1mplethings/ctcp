{"timestamp":"20260202_002","type":"feature","component":"web/graph_spider","issue":"启动默认Overview模式，深度可调，视图切换","description":"实现GUI启动默认Overview全局图，不自动focus到hub节点","changes":["修改spider_v4.js: CFG.expandDepth从常量1改为可变2","修改spider_v4.js: initPos移除rootId自动设置","修改spider_v4.js: setGraph默认调用overview()而非setRoot","修改spider_v4.js: 添加overview()函数显示全局图","修改spider_v4.js: 添加focusSelected()函数","修改spider_v4.js: 添加loadView()支持All/Pipeline/Docs/Summary切换","修改spider_v4.js: panel默认隐藏(setPanelVisible(false))","修改index.html: 添加View下拉选择器(viewSel)","修改index.html: 添加Depth数值输入框(1-6)","修改index.html: 添加Overview和Focus按钮","修改index.html: UI控件事件绑定"],"ai_agent":"GitHub Copilot"}
{"timestamp":"20260202_003","type":"feature","component":"web/graph_spider + src/GraphBuilder.cpp","issue":"文档关系(docs_link)可编辑并回写Markdown","description":"实现GUI中docs_link创建/删除，持久化到meta，回写到md文件","changes":["修改spider_v4.js: 添加linkFrom状态变量","修改spider_v4.js: 添加startLink()开始连边","修改spider_v4.js: 添加linkToSelected()创建docs_link","修改spider_v4.js: 添加unlinkSelected()删除docs_link","修改spider_v4.js: 调用bridge.editEdge保存到meta","修改index.html: 添加Start Link/Link To/Unlink按钮","修改GraphBuilder.cpp: docs_link边设置view=Docs而非Pipeline","修改meta_pipeline_graph.schema.json: edge type enum添加docs_link","创建scripts/sync_doc_links.py: 回写docs_link到md受控区块","sync_doc_links.py支持--check模式用于verify","修改scripts/verify.sh: 添加sync_doc_links.py --check调用"],"ai_agent":"GitHub Copilot"}
{"timestamp":"20260203_001","type":"feature","component":"web/graph_spider","issue":"目录折叠和局部展开功能","description":"实现specs/等目录默认折叠，可选择性展开聚焦，避免图太复杂","changes":["添加CFG.collapseDirs配置项(默认true)","添加expandedDirs Set追踪已展开目录","修改overview()支持目录折叠模式","添加isCollapsible()判断节点是否可折叠","添加getParentDir()获取节点父目录","添加toggleDir()切换单个目录展开/折叠","添加drillDown()聚焦到单个目录及其内容","修改dblclick事件：双击目录触发drillDown","添加Collapse Dirs复选框控制全局折叠","添加Toggle Expand按钮(仅目录节点显示)","添加Drill Down按钮(仅目录节点显示)","panel()函数根据节点类型显示/隐藏目录操作按钮"],"ai_agent":"GitHub Copilot"}
{"timestamp":"20260203_002","type":"fix","component":"web/graph_spider","issue":"多个UI和交互问题修复","description":"修复drillDown显示、UI深色主题、导航历史、邻接数据更新、节点差异化显示","changes":["修复drillDown路径匹配，确保包含目录下所有md文件","修复viewLinks过滤逻辑，drillDown和overview都实时更新邻接关系","添加select/input深色主题CSS(深蓝黑背景)","增强导航历史：overview和drillDown都加入history stack","添加restoreView函数处理back/forward导航","实现不同tier节点不同颜色(P0橙色/P1青绿/P2蓝色/P3灰蓝)","文件夹节点改为pentagon形状","所有UI元素统一深色主题"],"ai_agent":"GitHub Copilot"}
{"timestamp":"20260203_003","type":"refactor","component":"web","issue":"前端实现收敛为唯一版本","description":"将图前端实现标准化为唯一版本，历史实现全部归档","changes":["创建 web/_archive/ 归档结构（graph_spider_legacy/v2/v5_experimental/legacy_web_root）","spider_v4.js/css 重命名为 spider.js/css（去掉版本号）","旧 spider.js/css/bootstrap_graph.js 移到 _archive/graph_spider_legacy","spider_v5.js/css 移到 _archive/graph_spider_v5_experimental","graph_spider_v2/ 改为 redirect 壳，实现文件移到 _archive","web 根目录旧文件（app.js/cytoscape.min.js/qwebchannel.js）移到 _archive/legacy_web_root","graph_spider/index.html 引用改为 spider.js/spider.css","app.qrc 精简为只打包必须资源（graph_spider实现 + redirect壳）","MainWindow.cpp 窗口标题改为 Graph Spider（去掉 Cytoscape）"],"verification":["graph_spider/ 只保留：spider.js, spider.css, demo_graph.json, index.html, README.md","所有历史实现已归档到 _archive/","QRC 只包含实际运行必须的资源","加载路径仍为 qrc:/web/graph_spider/index.html"],"ai_agent":"GitHub Copilot"}
{"timestamp":"20260203_004","type":"enhancement","component":"GUI深色主题和交互优化","issue":"用户体验改进","description":"GUI改为全黑主题、优化边显示逻辑、调整面板大小","changes":["spider.css: 所有背景改为纯黑(#000000)，移除渐变","spider.css: 所有UI元素(input/select/panel/results/toast)使用黑色背景","spider.js: canvas背景从#0b0f14改为#000000","spider.js: 添加getPathToRoot函数追踪从根到选中节点的路径","spider.js: 修改边绘制逻辑，选中节点时只显示路径上的边","spider.js: 路径边使用更亮的青色(.88)和更粗线宽(2.5)","MainWindow.cpp: 文件树宽度限制180-280px，初始220px","MainWindow.cpp: splitter初始比例220:980","MainWindow.cpp: Details dock最小宽320px，初始380px"],"rationale":"黑色主题减少眼睛疲劳，路径高亮大幅减少视觉混乱，合理的面板大小提升可用性","ai_agent":"GitHub Copilot"}
{"timestamp":"20260203_005","type":"fix","component":"Details Window独立窗口修复","issue":"QDockWidget浮动后QWebEngineView空白问题","description":"应用sddai_fix_details_popout.patch修复Details窗口浮动显示问题","changes":["新增 DetailsWindow 类（独立顶层窗口，避免re-parent问题）","detailsDock 禁用 DockWidgetFloatable（避免浮动触发blank）","添加 View -> Open Details Window 菜单项","MainWindow::openDetailsWindow() 创建并显示独立Details窗口","添加 qt_style.qss 深色主题样式（菜单栏、滚动条、TreeView）","main.cpp 启动时加载 :/qt_style.qss 应用全局样式","detailsDock 添加 visibilityChanged 防御性reload机制","DetailsWindow::reloadPage() 强制重新加载避免偶发不刷新"],"rationale":"QWebEngineView在QDockWidget浮动时会因re-parent到新顶层窗口导致渲染失败，独立窗口从始至终都是top-level，100%稳定","verification":["Dock不再允许浮动（Features去掉Floatable）","View菜单有Open Details Window选项","点击后弹出独立Details窗口并正确显示内容","Qt原生滚动条样式美观（深色+圆角）"],"ai_agent":"GitHub Copilot"}
