# CTCP — ADLC + Multi-Agent Execution Engine

本仓库核心定位：核心 = ADLC 执行引擎（证据链 + failure bundle），把“项目实现”变成可验证、可回放、可审计的执行闭环。
- 默认路径是 **headless**（不依赖 GUI/Qt）。
- GUI 仅作为示例/可视化器，可选开启，不影响核心流程。
- find = workflow resolver（从本地 `workflow_registry/` + 历史成功记录解析最佳 workflow，不依赖联网检索）。
- 可选开启受控 web find（`resolver_plus_web`，由外部 Researcher 提供 `find_web.json`），默认仍不依赖联网。
- GUI 可选/默认挂起（不影响核心 gate）。

系统目标：
- 你只需给一个目标（Goal）
- 系统会自动拆解、执行、验收、记录
- 只有在 **必须由你决策/提供信息** 时才会提问
- 最终给你一份可回放的演示报告（trace + 可复现命令）

> 强约束入口：先读 `docs/00_CORE.md`、`AGENTS.md`、`ai_context/00_AI_CONTRACT.md`。  
> 规则冲突时以 `docs/00_CORE.md` 为准。

---

## Quick Start

唯一主入口（执行）：
```powershell
python scripts\ctcp_orchestrate.py new-run --goal "your-goal"
python scripts\ctcp_orchestrate.py advance --max-steps 8
```

唯一验收入口（Windows）：
```powershell
powershell -ExecutionPolicy Bypass -File scripts\verify_repo.ps1
```

唯一验收入口（Unix）：
```bash
bash scripts/verify_repo.sh
```

---

## What Orchestrator Produces

- `meta/tasks/CURRENT.md`：任务单（首次缺失时自动从模板生成）
- `meta/reports/LAST.md`：演示报告（首次缺失时自动生成最小文件）
- `${CTCP_RUNS_ROOT:-~/.ctcp/runs}/ctcp/<run_id>/`：一次运行目录（artifacts/reviews/outbox/logs）
- `meta/run_pointers/LAST_RUN.txt`：仓库内指针，指向最新外部 run 包绝对路径

---

## Build

默认 headless 构建：

```powershell
cmake -S . -B build_lite -DCTCP_ENABLE_GUI=OFF
cmake --build build_lite --config Release
```

GUI 示例构建（可选）：

```powershell
cmake -S . -B build_gui -DCTCP_ENABLE_GUI=ON -DCMAKE_PREFIX_PATH="<Qt path>"
cmake --build build_gui --config Release
```

更多见 `BUILD.md`。

---

## Doc Index

<!-- CTCP:DOC_INDEX:BEGIN -->
<!-- (auto-generated by scripts/sync_doc_links.py; curated list) -->

## Project Docs

- [AGENTS.md](AGENTS.md)
- [README.md](README.md)
- [BUILD.md](BUILD.md)
- [PATCH_README.md](PATCH_README.md)
- [docs/PATCH_CONTRACT.md](docs/PATCH_CONTRACT.md)
- [TREE.md](TREE.md)
- [docs/00_CORE.md](docs/00_CORE.md)
- [docs/00_overview.md](docs/00_overview.md)
- [docs/01_architecture.md](docs/01_architecture.md)
- [docs/02_workflow.md](docs/02_workflow.md)
- [docs/03_quality_gates.md](docs/03_quality_gates.md)
- [docs/10_team_mode.md](docs/10_team_mode.md)
- [docs/21_paths_and_locations.md](docs/21_paths_and_locations.md)
- [docs/22_teamnet_adlc.md](docs/22_teamnet_adlc.md)
- [docs/22_agent_teamnet.md](docs/22_agent_teamnet.md)
- [docs/30_artifact_contracts.md](docs/30_artifact_contracts.md)
- [docs/40_reference_project.md](docs/40_reference_project.md)
- [docs/12_modules_index.md](docs/12_modules_index.md)
- [docs/13_contracts_index.md](docs/13_contracts_index.md)
- [docs/SELF_CHECK_SYSTEM.md](docs/SELF_CHECK_SYSTEM.md)
- [ai_context/00_AI_CONTRACT.md](ai_context/00_AI_CONTRACT.md)

<!-- CTCP:DOC_INDEX:END -->

---

## Notes

- 本仓库默认 **Spec-first**：先改 docs/spec/meta，再改代码。
- “禁止代码”由 `scripts/workflow_checks.py` 强制执行（不满足直接 fail）。
