# CTCP — Coding Team Control Protocol (Spec-first Autonomous Coding Team)

本仓库的目标：把“写代码”变成一条可验证的流水线，让 **AI/agent 像一个项目团队一样持续推进**：
- 你只需给一个目标（Goal）
- 系统会自动拆解、执行、验收、记录
- 只有在 **必须由你决策/提供信息** 时才会提问
- 最终给你一份可回放的演示报告（trace + 可复现命令）

> 强约束入口：先读 `AGENTS.md` 和 `ai_context/00_AI_CONTRACT.md`。

---

## Quick Start

1) 生成任务单（DoD/验收先行）
```powershell
python tools\ctcp_assistant.py init-task "your-goal"
```

2) （可选）生成外部调研模板（Research-first）
```powershell
python tools\ctcp_assistant.py init-externals "your-goal"
```

3) 运行“团队式”执行（默认 dry-run，会生成 Agent Packet 与演示报告）
```powershell
python tools\ctcp_team.py start "your-goal"
```

4) 验收（必须）：证据闭环 verify（推荐）
```powershell
powershell -ExecutionPolicy Bypass -File scripts\verify.ps1
```
或：
```bash
bash scripts/verify.sh
```

5) 基础仓库门禁（workflow/contract/doc-index）
```powershell
powershell -ExecutionPolicy Bypass -File scripts\verify_repo.ps1
```
或：
```bash
bash scripts/verify_repo.sh
```

---

## What “Team Mode” Produces

- `meta/tasks/CURRENT.md`：本次任务单（验收、计划、是否允许改代码）
- `meta/externals/*`：外部方案对比（如果需要）
- `meta/runs/<timestamp>/`：一次运行的“团队包”
  - `PROMPT.md`：给 coding agent 的唯一输入
  - `QUESTIONS.md`：只允许写阻塞性问题
  - `TRACE.md`：全过程记录（演示用）
- `meta/reports/LAST.md`：面向你的最终演示报告（可回放/可审计）

---

## Build

见 `BUILD.md`。

---

## Doc Index

<!-- CTCP:DOC_INDEX:BEGIN -->
<!-- (auto-generated by scripts/sync_doc_links.py; curated list) -->

## Project Docs

- [AGENTS.md](AGENTS.md)
- [README.md](README.md)
- [BUILD.md](BUILD.md)
- [PATCH_README.md](PATCH_README.md)
- [TREE.md](TREE.md)
- [docs/00_overview.md](docs/00_overview.md)
- [docs/01_architecture.md](docs/01_architecture.md)
- [docs/02_workflow.md](docs/02_workflow.md)
- [docs/03_quality_gates.md](docs/03_quality_gates.md)
- [docs/10_team_mode.md](docs/10_team_mode.md)
- [docs/12_modules_index.md](docs/12_modules_index.md)
- [docs/13_contracts_index.md](docs/13_contracts_index.md)
- [docs/SELF_CHECK_SYSTEM.md](docs/SELF_CHECK_SYSTEM.md)
- [ai_context/00_AI_CONTRACT.md](ai_context/00_AI_CONTRACT.md)

<!-- CTCP:DOC_INDEX:END -->

---

## Notes

- 本仓库默认 **Spec-first**：先改 docs/spec/meta，再改代码。
- “禁止代码”由 `scripts/workflow_checks.py` 强制执行（不满足直接 fail）。


- [simlab-broken-link](docs/NOPE_SIMLAB.md)
